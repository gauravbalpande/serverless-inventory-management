version: 1
frontend:
  phases:
    build:
      commands:
        - echo "Injecting environment variables..."
        - cp frontend/config.template.js frontend/config.js
        - sed -i "s|__API_BASE_URL__|$API_BASE_URL|g" frontend/config.js
        - sed -i "s|__COGNITO_USER_POOL_ID__|$COGNITO_USER_POOL_ID|g" frontend/config.js
        - sed -i "s|__COGNITO_CLIENT_ID__|$COGNITO_CLIENT_ID|g" frontend/config.js
        - sed -i "s|__COGNITO_REGION__|$COGNITO_REGION|g" frontend/config.js
        - echo "Generated config.js:"
        - cat frontend/config.js
  artifacts:
    baseDirectory: frontend
    files:
      - '**/*'
  cache:
    paths: []

